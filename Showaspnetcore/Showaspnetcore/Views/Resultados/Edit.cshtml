@using Microsoft.CodeAnalysis
@using Showaspnetcore.Data
@model Showaspnetcore.Data.ResultadoExame

@{
    Layout = "_LayoutMedical";
}

<section id="resultado" class="intro">
    <div class="intro-resultado">
        <div class="container">
            <div class="row">
                <div class="clearfix">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2>
                                        Paciênte: @Model.Paciente.Name <small></small>
                                    </h2>
                                    <h4>
                                        Exame: @Model.Exame <small></small>
                                    </h4>
                                    <div class="clearfix"></div>
                                </div>
                                <hr />
                                <table class="table">
                                    <thead class="thead-inverse">
                                        <tr>
                                            <th>Descrição</th>
                                            <th>Tamanho</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var image in Model.Imagens)
                                        {
                                            <tr>
                                                
                                                <td>@image.Descricao</td>
                                                <td>@((image.Length / 1024).ToString("N2")) KB</td>
                                                <td></td>
                                                <td class="project-actions">
                                                    <a href="@image.Local" target="_blank" class="btn btn-primary btn-sm"><i class="fa fa-check-circle"></i> Visualizar</a>
                                                    <a asp-controller="Resultados" asp-action="Download"
                                                       asp-route-imagemGuid="@image.ImagemGuid"
                                                       asp-route-resultadoGuid="@image.ResultadoExameGuid"
                                                       class="btn btn-primary btn-sm"><i class="fa fa-folder"></i> Salvar</a>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div id="myCarousel" class="carousel slide">
                    <div class="carousel-inner">
                        <div class="item ">
                            <img src="/Images/Camel.jpg" style="height:400px;" name="1" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Dog.jpeg" style="height:400px;" name="2" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Giraffe.jpg" style="height:400px;" name="3" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Liger.jpg" style="height:400px;" name="4" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Polar_Bear.jpg" style="height:400px;" name="5" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Saint_Bernard.jpg" style="height:400px;" name="6" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Siberian_Tiger.jpg" style="height:400px;" name="7" class="img-responsive">
                        </div>
                        <div class="item">
                            <img src="/Images/Zebra.jpg" style="height:400px;" name="8" class="img-responsive">
                        </div>
                    </div>
                    <!-- Controls -->
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                        <span class="icon-prev"></span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                        <span class="icon-next"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('.thumbnail').click(function () {
            alert('Entrou');
            var name = $(this).find('img').attr('src');
            var mname = $('.carousel-inner').find("img[src='" + $(this).find('img').attr('src') + "']");
            $('.carousel-inner div').removeClass("active");
            $(mname).parent().addClass("active");
            $('#myModal').modal({
                backdrop: 'static',
            }, 'show');
        });
    });
</script>
